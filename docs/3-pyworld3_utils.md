# Pyworld3 Utils

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
None
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-pyworld3.utils.requires-start--->
## [pyworld3.utils.requires](3-pyworld3_utils.md#pyworld3.utils.requires)

<!---Documatic-section-requires-start--->
<!---Documatic-block-pyworld3.utils.requires-start--->
<details>
	<summary><code>pyworld3.utils.requires</code> code snippet</summary>

```python
def requires(outputs=None, inputs=None, check_at_init=True, check_after_init=True):

    def requires_decorator(updater):
        if verbose_debug:
            print('Define the update requirements...\n                  - inputs:  {}\n                  - outputs: {}\n                  - check at init [k=0]:    {}\n                  - check after init [k>0]: {}'.format(inputs, outputs, check_at_init, check_after_init))
            print('... and create a requires decorator for the update function', updater.__name__)

        @wraps(updater)
        def requires_and_update(self, *args):
            k = args[0]
            go_grant = k == 0 and check_at_init or (k > 0 and check_after_init)
            if inputs is not None and go_grant:
                for input_ in inputs:
                    input_arr = getattr(self, input_.lower())
                    if isnan(input_arr[k]):
                        if self.verbose:
                            warn_msg = 'Warning, {} unknown for current k={} -'
                            print(warn_msg.format(input_, k), updater.__name__)
                            print('Rescheduling current loop')
                        self.redo_loop = True
            return updater(self, *args)
        return requires_and_update
    return requires_decorator
```
</details>
<!---Documatic-block-pyworld3.utils.requires-end--->
<!---Documatic-section-requires-end--->

# #
<!---Documatic-section-pyworld3.utils.requires-end--->

<!---Documatic-section-pyworld3.utils.plot_world_variables-start--->
## [pyworld3.utils.plot_world_variables](3-pyworld3_utils.md#pyworld3.utils.plot_world_variables)

<!---Documatic-section-plot_world_variables-start--->
<!---Documatic-block-pyworld3.utils.plot_world_variables-start--->
<details>
	<summary><code>pyworld3.utils.plot_world_variables</code> code snippet</summary>

```python
def plot_world_variables(time, var_data, var_names, var_lims, img_background=None, title=None, figsize=None, dist_spines=0.09, grid=False):
    prop_cycle = plt.rcParams['axes.prop_cycle']
    colors = prop_cycle.by_key()['color']
    var_number = len(var_data)
    (fig, host) = plt.subplots(figsize=figsize)
    axs = [host]
    for i in range(var_number - 1):
        axs.append(host.twinx())
    fig.subplots_adjust(left=dist_spines * 2)
    for (i, ax) in enumerate(axs[1:]):
        ax.spines['left'].set_position(('axes', -(i + 1) * dist_spines))
        ax.spines['left'].set_visible(True)
        ax.yaxis.set_label_position('left')
        ax.yaxis.set_ticks_position('left')
    if img_background is not None:
        im = imread(img_background)
        axs[0].imshow(im, aspect='auto', extent=[time[0], time[-1], var_lims[0][0], var_lims[0][1]], cmap='gray')
    ps = []
    for (ax, label, ydata, color) in zip(axs, var_names, var_data, colors):
        ps.append(ax.plot(time, ydata, label=label, color=color)[0])
    axs[0].grid(grid)
    axs[0].set_xlim(time[0], time[-1])
    for (ax, lim) in zip(axs, var_lims):
        ax.set_ylim(lim[0], lim[1])
    for ax_ in axs:
        formatter_ = EngFormatter(places=0, sep='\u2009')
        ax_.tick_params(axis='y', rotation=90)
        ax_.yaxis.set_major_locator(plt.MaxNLocator(5))
        ax_.yaxis.set_major_formatter(formatter_)
    tkw = dict(size=4, width=1.5)
    axs[0].set_xlabel('time [years]')
    axs[0].tick_params(axis='x', **tkw)
    for (i, (ax, p)) in enumerate(zip(axs, ps)):
        ax.set_ylabel(p.get_label(), rotation='horizontal')
        ax.yaxis.label.set_color(p.get_color())
        ax.tick_params(axis='y', colors=p.get_color(), **tkw)
        ax.yaxis.set_label_coords(-i * dist_spines, 1.01)
    if title is not None:
        fig.suptitle(title, x=0.95, ha='right', fontsize=10)
    plt.tight_layout()
```
</details>
<!---Documatic-block-pyworld3.utils.plot_world_variables-end--->
<!---Documatic-section-plot_world_variables-end--->

# #
<!---Documatic-section-pyworld3.utils.plot_world_variables-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)